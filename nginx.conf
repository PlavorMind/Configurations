worker_processes auto;
events
{worker_connections 100;}
http
{include blacklist.conf;
include mime.types;
#Maximum client request content length (File size)
client_max_body_size 1024M;
#Default MIME type of a response (Auto-generated by nginx)
default_type application/octet-stream;
#Error pages
error_page 403 /error/403.html;
error_page 404 /error/404.html;
error_page 500 /error/500.html;
error_page 501 /error/501.html;
error_page 502 /error/502.html;
error_page 503 /error/503.html;
error_page 504 /error/504.html;
#Index
index index.php index.html Main.php Main.html;
#Keep-alive connection timeout
keepalive_timeout 1m 1m;
#Allow sending files
sendfile on;
#Disable emitting nginx version
server_tokens off;
#Prefer server ciphers over client ciphers when using the SSLv3 and TLS protocols
ssl_prefer_server_ciphers on;
#SSH protocols
ssl_protocols TLSv1 TLSv1.1 TLSv1.2 TLSv1.3;
server
  {listen 81;
  server_name _;
  root web/Main;
  location /error/403.html
    {allow all;}
  location /robots.txt
    {allow all;}
  location ~* \.php$
    {include fastcgi_params;
    fastcgi_pass 127.0.0.1:90;
    fastcgi_index index.php;
    fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;}
  }
server
  {listen 81;
  #listen 443 ssl;
  #ssl_certificate cert.pem;
  #ssl_certificate_key cert.key;
  #ssl_session_cache shared:SSL:1m;
  #ssl_session_timeout 5m;
  #ssl_ciphers HIGH:!aNULL:!MD5;
  server_name exit.nerdpol.ovh;
  root web/PlavorEXITBeta;
  location /error/403.html
    {allow all;}
  location /robots.txt
    {allow all;}
  location /plavorexitbeta/images
    {}
  location /plavorexitbeta/images/deleted
    {deny all;}
  location /plavorexitbeta/PrivateSettings.php
    {deny all;}
  location /plavorexitbeta/logo.png
    {}
  location ~* \.php$
    {include fastcgi_params;
    fastcgi_pass 127.0.0.1:90;
    fastcgi_index index.php;
    fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;}
  location /exit
    {include fastcgi_params;
    fastcgi_pass 127.0.0.1:90;
    fastcgi_index index.php;
    fastcgi_param SCRIPT_FILENAME $document_root/plavorexitbeta/index.php;}
  location = /
    {rewrite ^/$ /exit/;}
  location ~* ^\/plavorexitbeta\/(extensions|skins)\/.*\.(bmp|css|gif|jpe?g|js(on)?|png|svg|tiff?)
    {try_files $uri =404;}
  location ~* ^\/plavorexitbeta\/resources\/(assets|lib|src)\/.*\.png
    {access_log off;
    try_files $uri =404;}
  location /plavorexitbeta
    {deny all;}
  }
}
